{"version":3,"sources":["lowlevel.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"lowlevel.js","sourcesContent":["app.controller(\"lowLevelController\",[\"$scope\",\"$http\",\r\nfunction ($scope,$http){\r\n    $scope.lowlevels = \"\";\r\n    const io = ws('localhost:3333',{});\r\n\r\n    const client = io.channel('lowlevel');\r\n    client.connect(function(error, connected){\r\n        if(error){\r\n            console.log(error);\r\n            return\r\n        }\r\n        console.log('LowLevelMonitor Conectado');\r\n        client.emit('LowLevelSubscribe');\r\n        client.emit('LowLevelEvent');\r\n    });\r\n\r\n    client.on('disconnect',function() {\r\n        console.log('LowLevel Desconectado');\r\n    });\r\n    client.on('LowLevelEventResponse', function (message) {\r\n        $scope.estado = message;\r\n        //console.log(message);\r\n        $scope.$apply();\r\n    });\r\n\r\n    client.on('LowLevelChannelRedis', function (message) {\r\n        //console.log(message);\r\n        $scope.lowlevels = JSON.parse(message);\r\n        //var Machine =[];\r\n        $scope.materialList=[];\r\n        angular.forEach($scope.lowlevels,function(maquinas,keyMaq){\r\n            angular.forEach(maquinas,function(maquina,keyMat){\r\n\r\n                var Material=[];\r\n                Material.machine = maquina.attributes.id;\r\n                Material.materiales = [];\r\n\r\n                angular.forEach(maquina.PartLowWarning,function(material,key3){\r\n                    if (material.attributes !== undefined) {\r\n                        Material.materiales.push(material.attributes);\r\n//                        Material.location = material.attributes.location;\r\n  //                      Material.partNumber = material.attributes.partNumber;\r\n                    }\r\n                    else {\r\n                        Material.materiales.push(material);\r\n\r\n//                        Material.location = material.location;\r\n   //                     Material.partNumber = material.partNumber;\r\n                    }\r\n                    //Machine.push(Material);\r\n                });\r\n\r\n                $scope.materialList.push(Material);\r\n\r\n            });\r\n            //if ($scope.machines.indexOf(maquina.attributes.id) == -1){\r\n            //    $scope.machines.push(maquina.attributes.id);\r\n            //}\r\n        });\r\n\r\n        //for (var i = 0; i < $scope.lowlevels.Tool.length; i++){\r\n        //    //console.log($scope.lowlevels.Tool[i].PartLowWarning);\r\n        //    for (var j=0; j < $scope.lowlevels.Tool[i].PartLowWarning.length;j++){\r\n        //        //console.log($scope.lowlevels.Tool[i].PartLowWarning[j]);\r\n        //        Material.push($scope.lowlevels.Tool[i].PartLowWarning[j]);\r\n        //    }\r\n        //}\r\n        //$scope.materialList.push(Machine);\r\n        //console.log(Machine);\r\n        $scope.$apply();\r\n    });\r\n}\r\n\r\n]);"]}