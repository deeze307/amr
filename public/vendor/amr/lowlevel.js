app.controller("lowLevelController",["$scope","$http",function(t,e){t.lowlevels="";const o=ws("localhost:3333",{});e.get("http://localhost/amr/public/init");const a=o.channel("lowlevel");a.connect(function(t,e){return t?void console.log(t):(console.log("LowLevelMonitor Conectado"),a.emit("LowLevelSubscribe"),void a.emit("LowLevelEvent"))}),a.on("disconnect",function(){console.log("LowLevel Desconectado")}),a.on("LowLevelEventResponse",function(e){t.estado=e,t.$apply()}),a.on("LowLevelChannelRedis",function(e){t.lowlevels=JSON.parse(e),t.machineList=[],t.materialList=[],t.lineas=[],t.mostrarTabla=!1,angular.forEach(t.lowlevels,function(e,o){angular.forEach(e,function(e,o){var a=e.attributes.id.split("-");t.lineas.indexOf(a[0])===-1&&t.lineas.push(a[0]),angular.forEach(e.PartLowWarning,function(o,a){var n;void 0!==o.attributes?(o.attributes.machine=e.attributes.id,"Empty"===o.attributes.status&&(o.attributes["class"]="danger"),n=o.attributes):(o.machine=e.attributes.id,"Empty"===o.status&&(o["class"]="danger"),n=o),t.materialList.push(n)}),t.mostrarTabla=!0})}),t.materialList.timestamp=moment().format("LTS"),t.$apply()})}]);