app.controller("configController",["$scope","$http","configFactory","toasty",function(a,i,n,e){function t(i,n){"linea_amr"==i?a.lineasAMR.length>0&&(a.lineasAMR=[]):a.lineasAMI.length>0&&(a.lineasAMI=[]),angular.forEach(n,function(n){var e={id_config:n.id_config,config_item:n.config_item,linea:n.value,habilitada:"true"==n.enabled?"Habilitada":"Deshabilitada","class":"true"==n.enabled?"btn btn-xs btn-success":"btn btn-xs btn-danger"};"linea_amr"==i?a.lineasAMR.push(e):a.lineasAMI.push(e)})}function l(a){n.getConfigVal(a).then(function(i){t(a,i.data)})}function o(i){n.getConfigVal(i).then(function(n){"intervalo_amr"==i?a.sliderValAMR=n.data[0].value:"intervalo_ami"==i?a.sliderValAMI=n.data[0].value:"intervalo_delta"==i&&(a.sliderValDELTA=n.data[0].value)})}a.lineasAMI=[],a.lineasAMR=[],o("intervalo_amr"),o("intervalo_ami"),o("intervalo_delta"),l("linea_amr"),l("linea_ami"),$("#SliderAMR").slider().on("slide",function(i){a.sliderValAMR=i.value}),$("#SliderAMI").slider().on("slide",function(i){a.sliderValAMI=i.value}),$("#SliderDELTA").slider().on("slide",function(i){a.sliderValDELTA=i.value}),a.setAMR=function(i){var t;"itervalo_amr"==i?t=a.sliderValAMR:"intervalo_ami"==i?t=a.sliderValAMI:"intervalo_delta"==i&&(t=a.sliderValDELTA),console.log(i),n.setAMR("config_item",i,"value",t).then(function(a){"OK"===a.data?e.success({title:"Configuración Guardada!"}):e.error({title:"Ocurrió un Error!",shake:!0})})},a.updateStatus=function(a){var i=!0;"Habilitada"==a.habilitada&&(i=!1),n.setAMR("id_config",a.id_config,"enabled",i).then(function(i){l(a.config_item)})}}]),app.factory("configFactory",["$http","$location",function(a,i){i.absUrl();return{getConfigVal:function(i){return a.get("config/get/"+i)},setAMR:function(i,n,e,t){return a.get("config/set/"+i+"/"+n+"/"+e+"/"+t)}}}]);